<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Académie de Combat Pokémon - 2 Joueurs</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f2f2f2;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 { text-align: center; }
  .arena {
    display: flex;
    justify-content: space-around;
    width: 100%;
    max-width: 800px;
    margin: 20px 0;
  }
  .player {
    background: #fff;
    border: 2px solid #333;
    border-radius: 10px;
    padding: 10px;
    width: 45%;
    text-align: center;
  }
  .hp-bar {
    height: 20px;
    background: green;
    margin: 5px 0;
  }
  button {
    margin: 5px;
    padding: 10px 15px;
    cursor: pointer;
  }
</style>
</head>
<body>
<h1>Académie de Combat Pokémon</h1>

<div id="chooseArea">
  <h2>Choisissez vos Pokémon</h2>
  <div>
    Joueur 1 : 
    <select id="p1Select"></select>
  </div>
  <div>
    Joueur 2 : 
    <select id="p2Select"></select>
  </div>
  <button onclick="startBattle()">Commencer le combat</button>
</div>

<div class="arena" id="battleArea" style="display:none;">
  <div class="player" id="player1">
    <h2 id="p1Name"></h2>
    <div class="hp-bar" id="p1HP"></div>
    <div id="p1Moves"></div>
  </div>
  <div class="player" id="player2">
    <h2 id="p2Name"></h2>
    <div class="hp-bar" id="p2HP"></div>
    <div id="p2Moves"></div>
  </div>
</div>

<div id="result" style="margin-top:20px; font-size:1.2em;"></div>

<script>
// Liste de Pokémon simplifiés
const pokemons = [
  {name: "Pikachu", hp: 100, moves: [{name:"Éclair", dmg:20}, {name:"Vive-Attaque", dmg:15}]},
  {name: "Bulbizarre", hp: 120, moves: [{name:"Fouet Lianes", dmg:15}, {name:"Charge", dmg:10}]},
  {name: "Salamèche", hp: 100, moves: [{name:"Flammèche", dmg:20}, {name:"Griffe", dmg:15}]},
  {name: "Carapuce", hp: 110, moves: [{name:"Pistolet à O", dmg:15}, {name:"Morsure", dmg:15}]}
];

let player1 = {};
let player2 = {};
let turn = 1;

// Remplir les sélections
const p1Select = document.getElementById('p1Select');
const p2Select = document.getElementById('p2Select');

pokemons.forEach((p, i) => {
  let option1 = document.createElement('option');
  option1.value = i; option1.text = p.name;
  p1Select.add(option1);

  let option2 = document.createElement('option');
  option2.value = i; option2.text = p.name;
  p2Select.add(option2);
});

function startBattle() {
  player1 = {...pokemons[p1Select.value]};
  player2 = {...pokemons[p2Select.value]};
  
  document.getElementById('chooseArea').style.display = 'none';
  document.getElementById('battleArea').style.display = 'flex';
  
  updateUI();
}

function updateUI() {
  document.getElementById('p1Name').innerText = player1.name + " (Joueur 1)";
  document.getElementById('p2Name').innerText = player2.name + " (Joueur 2)";
  
  document.getElementById('p1HP').style.width = player1.hp + "%";
  document.getElementById('p2HP').style.width = player2.hp + "%";
  
  // Afficher les boutons d'attaque selon le tour
  const p1MovesDiv = document.getElementById('p1Moves');
  const p2MovesDiv = document.getElementById('p2Moves');
  p1MovesDiv.innerHTML = '';
  p2MovesDiv.innerHTML = '';

  if(turn === 1) {
    player1.moves.forEach((move, i) => {
      const btn = document.createElement('button');
      btn.innerText = move.name;
      btn.onclick = () => attack(player1, player2, move);
      p1MovesDiv.appendChild(btn);
    });
  } else {
    player2.moves.forEach((move, i) => {
      const btn = document.createElement('button');
      btn.innerText = move.name;
      btn.onclick = () => attack(player2, player1, move);
      p2MovesDiv.appendChild(btn);
    });
  }
}

function attack(attacker, defender, move) {
  defender.hp -= move.dmg;
  if(defender.hp < 0) defender.hp = 0;
  document.getElementById('result').innerText = `${attacker.name} utilise ${move.name} !`;
  
  // Vérifier victoire
  if(defender.hp <= 0) {
    document.getElementById('result').innerText = `${attacker.name} gagne le combat !`;
    document.getElementById('p1Moves').innerHTML = '';
    document.getElementById('p2Moves').innerHTML = '';
    return;
  }

  // Changer de tour
  turn = turn === 1 ? 2 : 1;
  updateUI();
}
</script>
</body>
</html>