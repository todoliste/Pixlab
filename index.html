
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Pokémon TCG - Choix Deco</title>
<style>
body{font-family:Arial;margin:0;padding:0;background:#222;color:#fff;display:flex;flex-direction:column;align-items:center;}
h1{text-align:center;margin:10px;}
#battleArea{display:none;width:1000px;height:600px;background-size:cover;position:relative;border:2px solid #fff;border-radius:10px;margin-top:10px;}
.hand, .bench, .field{display:flex;flex-wrap:wrap;justify-content:center;position:absolute;}
.hand{bottom:10px; left:50%; transform:translateX(-50%);}
.field{top:50%; left:50%; transform:translate(-50%,-50%);}
.bench{bottom:150px; left:50%; transform:translateX(-50%);}
.card{width:80px;height:110px;margin:5px;border:2px solid #333;border-radius:10px;background:white;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;position:relative;}
.card img{width:70px;height:70px;object-fit:contain;}
.hp-bar{width:70%;height:10px;border-radius:5px;background:green;position:absolute;top:5px;left:50%;transform:translateX(-50%);}
.energy-attached{font-size:12px;margin-top:2px;color:#000;display:flex;gap:2px;}
button{margin:5px;padding:5px 10px;cursor:pointer;}
.attackButton{margin:2px;padding:2px 5px;cursor:pointer;background:#ff0;color:#000;border:none;border-radius:3px;}
.effect{position:absolute;width:60px;height:60px;pointer-events:none;}
#result{color:#fff;font-weight:bold;margin-top:10px;}
</style>
</head>
<body>

<h1>Pokémon TCG - Choix de l'arène et deck</h1>

<div>
<label>Choisir l'arène :</label>
<select id="arenaSelect">
<option value="eau">Eau</option>
<option value="feu">Feu</option>
<option value="plante">Plante</option>
<option value="electrik">Électrik</option>
</select>
<button onclick="startGame()">Lancer le jeu</button>
</div>

<div id="battleArea">
  <div id="hand1" class="hand"></div>
  <div id="hand2" class="hand" style="top:auto;bottom:470px;"></div>
  <div id="active1" class="field"></div>
  <div id="active2" class="field" style="top:100px;"></div>
  <div id="bench1" class="bench"></div>
  <div id="bench2" class="bench" style="top:50px;"></div>
  <p id="result"></p>
</div>

<button onclick="nextTurn()">Fin du tour</button>

<script>
// Exemple de cartes par type
const pokemonByType = {
  eau:[
    {name:"Carapuce",hp:60,img:"images/carapuce.png"},
    {name:"Tiplouf",hp:60,img:"images/tiplouf.png"}
  ],
  feu:[
    {name:"Salamèche",hp:60,img:"images/salamèche.png"},
    {name:"Héricendre",hp:60,img:"images/hericendre.png"}
  ],
  plante:[
    {name:"Bulbizarre",hp:70,img:"images/bulbizarre.png"},
    {name:"Vipélierre",hp:70,img:"images/vipelierre.png"}
  ],
  electrik:[
    {name:"Pikachu",hp:60,img:"images/pikachu.png"},
    {name:"Évoli Électrik",hp:60,img:"images/evoli_electrik.png"}
  ]
};

const energyByType = {
  eau:"energie_eau.png",
  feu:"energie_feu.png",
  plante:"energie_plante.png",
  electrik:"energie_electrik.png"
};

let player1Deck=[],player2Deck=[],hand1=[],hand2=[],active1=null,active2=null,bench1=[],bench2=[],turn=1;
const battleArea=document.getElementById("battleArea");
const handDiv1=document.getElementById("hand1");
const handDiv2=document.getElementById("hand2");
const activeDiv1=document.getElementById("active1");
const activeDiv2=document.getElementById("active2");
const benchDiv1=document.getElementById("bench1");
const benchDiv2=document.getElementById("bench2");
const resultP=document.getElementById("result");

// Lancer le jeu
function startGame(){
  const type=document.getElementById("arenaSelect").value;
  battleArea.style.backgroundImage=`url('images/${type}_arena.png')`;
  generateDecks(type);
  hand1=player1Deck.splice(0,7);
  hand2=player2Deck.splice(0,7);
  battleArea.style.display="block";
  renderAll();
}

// Générer decks 60 cartes
function generateDecks(type){
  player1Deck=[]; player2Deck=[];
  for(let i=0;i<30;i++){
    const poke=JSON.parse(JSON.stringify(pokemonByType[type][i%pokemonByType[type].length]));
    player1Deck.push(poke);
    player2Deck.push(JSON.parse(JSON.stringify(poke)));
  }
  for(let i=0;i<30;i++){
    player1Deck.push({name:type+" Énergie",type:"Énergie",img:"images/"+energyByType[type]});
    player2Deck.push({name:type+" Énergie",type:"Énergie",img:"images/"+energyByType[type]});
  }
  shuffle(player1Deck); shuffle(player2Deck);
}

function shuffle(a){for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}}

// Affichage
function renderAll(){renderHand(); renderActive(); renderBench();}
function renderHand(){handDiv1.innerHTML="";handDiv2.innerHTML="";hand1.forEach((c,i)=>handDiv1.appendChild(createCard(c,1,i)));hand2.forEach((c,i)=>handDiv2.appendChild(createCard(c,2,i)));}
function renderActive(){activeDiv1.innerHTML="";activeDiv2.innerHTML="";if(active1)activeDiv1.appendChild(createCard(active1,1,true));if(active2)activeDiv2.appendChild(createCard(active2,2,true));}
function renderBench(){benchDiv1.innerHTML="";benchDiv2.innerHTML="";bench1.forEach(c=>benchDiv1.appendChild(createCard(c,1)));bench2.forEach(c=>benchDiv2.appendChild(createCard(c,2)));}

function createCard(card,player,isActive=false){const div=document.createElement("div");div.className="card";div.innerHTML=`<img src="${card.img}" alt="${card.name}"><p>${card.name}</p>`;div.draggable=true;div.ondragstart=(e)=>{e.dataTransfer.setData("cardIndex",0); e.dataTransfer.setData("player",player);};div.ondragover=(e)=>e.preventDefault();div.ondrop=(e)=>{playCard(player,0);};return div;}

function playCard(player,index){
  const hand=player===1?hand1:hand2;
  const active=player===1?active1:active2;
  const bench=player===1?bench1:bench2;
  const card=hand[index];
  if(card.type==="Pokémon"){if(!active){if(player===1) active1=card; else active2=card;}else if(bench.length<5) bench.push(card);} 
  else if(card.type==="Énergie"){if(active){if(!active.energy) active.energy=[];active.energy.push(card.type);}else return alert("Pas de Pokémon actif !");}
  hand.splice(index,1); renderAll();
}

function nextTurn(){turn=turn===1?2:1;if(turn===1&&player1Deck.length>0) hand1.push(player1Deck.shift());if(turn===2&&player2Deck.length>0) hand2.push(player2Deck.shift());renderAll();}
</script>

</body>
</html>